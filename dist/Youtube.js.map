{"version":3,"sources":["webpack:///webpack/bootstrap 6561b01e76b2d2874e5b","webpack:///./index.js","webpack:///./~/meister-heartbeat/index.js","webpack:///./~/promise-script-loader/promiseScriptLoader.js","webpack:///./src/js/Youtube.js","webpack:///./src/js/YoutubePlayer.js","webpack:///./src/js/utils/qualityToKbps.js","webpack:///./package.json"],"names":["Youtube","YoutubePlayer","HeartBeat","beatsPerS","debug","intervalTime","Number","isFinite","shouldCallCallback","lastBeat","intervalId","onBeat","console","log","clearInterval","Date","now","setInterval","timeSinceLastBeat","promiseScriptLoader","scriptLoader","url","Promise","resolve","reject","script","document","createElement","type","src","async","addEventListener","body","appendChild","config","meister","player","scriptUrl","onYoutubeApiReadyPromise","youtubeApiReadyResolve","window","onYouTubePlayerAPIReady","item","supported","errorCode","Meister","ErrorCodes","WRONG_TYPE","getPlayerByType","on","_onPlayerTimeUpdate","bind","onRequestSeek","currentSrc","trigger","currentTime","duration","e","targetTime","isNaN","relativePosition","timeOffset","blockSeekForward","NaN","time","version","MediaPlugin","registerPlugin","pluginName","mediaElement","heartbeat","isPlaying","playerTime","videoData","iframeReadyPromise","iframeReadyResolve","onResize","id","Math","random","toString","wrapper","YT","Player","height","width","events","onReady","onIframeReady","onStateChange","onPlayerStateChange","playerVars","controls","autoplay","modestbranding","rel","showinfo","kill","pauseVideo","mute","playVideo","unmute","event","beat","onHeartbeat","isLive","onRequestBitrate","data","PlayerState","PLAYING","ENDED","shouldTriggerReplay","PAUSED","getVideoData","title","videoQualitys","getAvailableQualityLevels","bitrates","forEach","bitrate","index","push","currentBitrate","getPlaybackQuality","currentBitrateIndex","findIndex","currentIndex","bitrateItem","find","bitrateIndex","quality","setPlaybackQuality","getCurrentTime","container","offsetWidth","offsetHeight","webkitFullscreenElement","screen","resetNormalModeAfterFullScreen","beforeFullscreenWidth","beforeFullscreenHeight","setSize","then","startsWith","error","loadVideoById","seekTo","getDuration","getVolume","volume","setVolume","isMuted","unMute","PlayerPlugin","qualityToKbps","kbpsToQuality","mapping","highres","hd2160","hd1440","hd1080","hd720","large","medium","small","tiny","auto","qualitys","map","kbps","Object","keys"],"mappings":"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","file":"dist/Youtube.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6561b01e76b2d2874e5b","import Youtube from './src/js/Youtube';\nimport YoutubePlayer from './src/js/YoutubePlayer';\n\nexport { Youtube, YoutubePlayer };\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","class HeartBeat {\n    constructor(beatsPerS, debug = false) {\n        this.intervalTime = Number.isFinite(beatsPerS) ? (beatsPerS * 1000) : 5000;\n        this.debug = debug;\n\n        this.shouldCallCallback = true;\n\n        this.lastBeat = 0;\n        this.intervalId = 0;\n    }\n\n    beat(onBeat = () => {}) {\n        if (this.intervalId) {\n            if (this.debug) { console.log('Removing previous interval'); }\n            clearInterval(this.intervalId);\n        }\n\n        // Interval starts firing at the end of the interval, so previous beat would have been now\n        this.lastBeat = Date.now();\n\n        this.intervalId = setInterval(() => {\n            const now = Date.now();\n            const timeSinceLastBeat = now - this.lastBeat;\n\n            this.lastBeat = now;\n\n            if (this.shouldCallCallback) {\n                onBeat(timeSinceLastBeat);\n            }\n        }, this.intervalTime);\n    }\n\n    mute() {\n        this.shouldCallCallback = false;\n    }\n\n    unmute() {\n        this.shouldCallCallback = true;\n    }\n\n    kill() {\n        clearInterval(this.intervalId);\n    }\n}\n\nexport default HeartBeat;\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/meister-heartbeat/index.js","const promiseScriptLoader = function scriptLoader(url) {\n    return new Promise(function (resolve, reject) {\n        const script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.src = url;\n        script.async = true;\n        script.addEventListener(\"load\", resolve)\n        script.addEventListener(\"error\", reject)\n        document.body.appendChild(script);\n    });\n}\n\nexport default promiseScriptLoader;\n\n\n\n// WEBPACK FOOTER //\n// ./~/promise-script-loader/promiseScriptLoader.js","import scriptLoader from 'promise-script-loader';\nimport packageJson from '../../package.json';\n\nclass Youtube extends Meister.MediaPlugin {\n    constructor(config, meister) {\n        super(config, meister);\n\n        this.player = null;\n        scriptLoader(config.scriptUrl || 'https://www.youtube.com/player_api');\n\n        // Thanks Google..\n        this.onYoutubeApiReadyPromise = new Promise((resolve) => {\n            this.youtubeApiReadyResolve = resolve;\n        });\n\n        window.onYouTubePlayerAPIReady = () => {\n            this.youtubeApiReadyResolve();\n        };\n    }\n\n    static get pluginName() {\n        return 'Youtube';\n    }\n\n    static get pluginVersion() {\n        return packageJson.version;\n    }\n\n    async isItemSupported(item) {\n        if (item.type !== 'youtube') {\n            return {\n                supported: false,\n                errorCode: Meister.ErrorCodes.WRONG_TYPE,\n            };\n        }\n\n        return {\n            supported: true,\n        };\n    }\n\n    async process(item) {\n        await this.onYoutubeApiReadyPromise;\n\n        this.player = this.meister.getPlayerByType('youtube', item);\n\n        return item;\n    }\n\n    load(item) {\n        super.load(item);\n\n        this.on('_playerTimeUpdate', this._onPlayerTimeUpdate.bind(this));\n        this.on('requestSeek', this.onRequestSeek.bind(this));\n\n        this.player.currentSrc = item.src;\n    }\n\n    get duration() {\n        if (!this.player) { return NaN; }\n\n        return this.player.duration;\n    }\n\n    get currentTime() {\n        if (!this.player) { return NaN; }\n\n        return this.player.currentTime;\n    }\n\n    set currentTime(time) {\n        if (!this.player) { return; }\n\n        this.player.currentTime = time;\n    }\n\n\n    _onPlayerTimeUpdate() {\n        this.meister.trigger('playerTimeUpdate', {\n            currentTime: this.player.currentTime,\n            duration: this.player.duration,\n        });\n    }\n\n    onRequestSeek(e) {\n        let targetTime;\n\n        if (!isNaN(e.relativePosition)) {\n            targetTime = e.relativePosition * this.player.duration;\n        } else if (!isNaN(e.timeOffset)) {\n            targetTime = this.player.currentTime + e.timeOffset;\n        }\n\n        // Check whether we are allowed to seek forward.\n        if (this.blockSeekForward && targetTime > this.player.currentTime) { return; }\n\n        if (Number.isFinite(targetTime)) {\n            this.player.currentTime = targetTime;\n        }\n    }\n}\n\nMeister.registerPlugin(Youtube.pluginName, Youtube);\n\nexport default Youtube;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Youtube.js","import Heartbeat from 'meister-heartbeat';\nimport { qualityToKbps, kbpsToQuality } from './utils/qualityToKbps';\n\nclass YoutubePlayer extends Meister.PlayerPlugin {\n    constructor(config, meister) {\n        super(config, meister);\n\n        this.mediaElement = null;\n        this.heartbeat = null;\n\n        // Keep track of all the statuses\n        this.isPlaying = false;\n        this.playerTime = 0;\n        this.videoData = null;\n\n        // We have to wait for the iframe to be ready.\n        // The ifrmaeReadyResolve will be called by onIframeReady\n        this.iframeReadyPromise = new Promise((resolve) => {\n            this.iframeReadyResolve = resolve;\n        });\n\n        // We need to manually resize the video element since youtube doesn't support automatic resizing.\n        window.addEventListener('resize', this.onResize.bind(this));\n    }\n\n    static get pluginName() {\n        return 'YoutubePlayer';\n    }\n\n    isTypeSupported(type) {\n        if (type === 'youtube') {\n            return true;\n        }\n\n        return false;\n    }\n\n    preloadContent() {\n        return Promise.resolve();\n    }\n\n    load(item) {\n        super.load(item);\n\n        this.mediaElement = document.createElement('div');\n        this.mediaElement.id = Math.random().toString();\n\n        this.wrapper.appendChild(this.mediaElement);\n\n        this.player = new window.YT.Player(this.mediaElement.id, {\n            height: '360',\n            width: '640',\n            events: {\n                onReady: this.onIframeReady.bind(this),\n                onStateChange: this.onPlayerStateChange.bind(this),\n            },\n            playerVars: {\n                controls: 0,\n                autoplay: 1,\n                modestbranding: 0,\n                rel: 0,\n                showinfo: 0,\n            },\n        });\n\n        // We have to wait for the iframe to be ready.\n        // The ifrmaeReadyResolve will be called by onIframeReady\n        this.iframeReadyPromise = new Promise((resolve) => {\n            this.iframeReadyResolve = resolve;\n        });\n\n        // this.meister.trigger('playerCreated');\n    }\n\n    unload() {\n        this.player = null;\n        this.isPlaying = false;\n        this.playerTime = 0;\n        this.videoData = null;\n        this.heartbeat.kill();\n        this.heartbeat = null;\n        this.mediaElement = null;\n    }\n\n    pause() {\n        if (!this.player && !this.player.pauseVideo) return;\n        this.player.pauseVideo();\n\n        // Unmute the heartbeat to continue the timeupdate.\n        if (this.heartbeat) this.heartbeat.mute();\n    }\n\n    play() {\n        if (!this.player || !this.player.playVideo) return;\n\n        // Mute the heartbeat so timeupdates will not occur.\n        if (this.heartbeat) this.heartbeat.unmute();\n        this.player.playVideo();\n    }\n\n    onIframeReady(event) {\n        this.iframeReadyResolve();\n\n        this.heartbeat = new Heartbeat(0.2);\n        this.heartbeat.beat(event => this.onHeartbeat(event));\n\n        this.meister.trigger('itemTimeInfo', {\n            isLive: false,\n            duration: this.duration,\n        });\n\n        this.on('requestBitrate', this.onRequestBitrate.bind(this));\n\n        this.onResize();\n        this.meister.trigger('playerCreated');\n    }\n\n    onPlayerStateChange(event) {\n        if (event.data === window.YT.PlayerState.PLAYING) {\n            this.isPlaying = true;\n            this.meister.trigger('playerPlay');\n        } else if (event.data === window.YT.PlayerState.ENDED) {\n            this.isPlaying = false;\n            this.shouldTriggerReplay = true;\n            this.meister.trigger('playerEnd');\n        } else if (event.data === window.YT.PlayerState.PAUSED) {\n            this.isPlaying = false;\n            this.meister.trigger('playerPause');\n        }\n\n        // Parse all the metadata that are available.\n        if (!this.videoData && this.player.getVideoData().title !== '') {\n            this.videoData = this.player.getVideoData();\n            this.videoQualitys = this.player.getAvailableQualityLevels();\n\n            this.bitrates = [];\n\n            this.videoQualitys = qualityToKbps(this.videoQualitys);\n            this.videoQualitys.forEach((bitrate, index) => this.bitrates.push({ bitrate, index }));\n\n            const currentBitrate = qualityToKbps([this.player.getPlaybackQuality()])[0];\n            const currentBitrateIndex = this.bitrates.findIndex(item => currentBitrate === item.bitrate);\n\n            this.meister.trigger('itemMetadata', this.videoData);\n            this.meister.trigger('itemBitrates', {\n                bitrates: this.bitrates,\n                currentIndex: currentBitrateIndex,\n            });\n        }\n    }\n\n    onRequestBitrate(event) {\n        const bitrateItem = this.bitrates.find(bitrate => bitrate.index === event.bitrateIndex);\n        const quality = kbpsToQuality(bitrateItem.bitrate);\n\n        this.player.setPlaybackQuality(quality);\n    }\n\n    onHeartbeat(event) {\n        this.playerTime = this.player.getCurrentTime();\n        this.meister.trigger('_playerTimeUpdate');\n    }\n\n    onResize() {\n        let width = this.meister.container.offsetWidth;\n        let height = this.meister.container.offsetHeight;\n\n        if (document.webkitFullscreenElement) {\n            width = window.screen.width;\n            height = window.screen.height;\n            this.resetNormalModeAfterFullScreen = true;\n        } else if (this.resetNormalModeAfterFullScreen) {\n            width = this.beforeFullscreenWidth;\n            height = this.beforeFullscreenHeight;\n            this.resetNormalModeAfterFullScreen = false;\n        }\n\n        if (!document.webkitFullscreenElement) {\n            this.beforeFullscreenWidth = width;\n            this.beforeFullscreenHeight = height;\n        }\n\n        if (!this.player) return;\n\n        // Not exactly sure what causes the height to be subtracted with 4\n        // But if this is removed, youtube will add a few pixels in height everytime you resize.\n        this.player.setSize(width, height - 4);\n    }\n\n    set currentSrc(url) {\n        if (!this.player) return;\n\n        this.iframeReadyPromise.then(() => {\n            if (url.startsWith('http')) {\n                console.error('Please insert a Youtube ID');\n            } else {\n                this.player.loadVideoById(url);\n            }\n        });\n    }\n\n    get playing() {\n        return this.isPlaying;\n    }\n\n    get currentTime() {\n        return this.playerTime;\n    }\n\n    set currentTime(time) {\n        this.player.seekTo(time);\n    }\n\n    get duration() {\n        if (!this.player || !this.player.getDuration) return;\n        return this.player.getDuration();\n    }\n\n    get volume() {\n        return this.player.getVolume() / 100;\n    }\n\n    set volume(volume) {\n        if (!this.player) return;\n\n        this.player.setVolume(volume * 100);\n        this.meister.trigger('playerVolumeChange');\n    }\n\n    get muted() {\n        return this.player.isMuted();\n    }\n\n    set muted(mute) {\n        if (mute) {\n            this.player.mute();\n        } else {\n            this.player.unMute();\n        }\n    }\n}\n\nMeister.registerPlugin(YoutubePlayer.pluginName, YoutubePlayer);\n\nexport default YoutubePlayer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/YoutubePlayer.js","const mapping = {\n    // Unknown high resolution\n    highres: 100000000,\n\n    // 2160p\n    hd2160: 35000000,\n\n    // 1440p\n    hd1440: 16000000,\n\n    // 1080p\n    hd1080: 8000000,\n\n    // 720p\n    hd720: 5000000,\n\n    // 480p\n    large: 2500000,\n\n    // 360p\n    medium: 1000000,\n\n    // 240p\n    small: 400000,\n\n    // 144p\n    tiny: 80000,\n\n    // Auto\n    auto: 0,\n};\n\nexport function qualityToKbps(qualitys) {\n    return qualitys.map(quality => mapping[quality]);\n}\n\nexport function kbpsToQuality(kbps) {\n    return Object.keys(mapping).find(quality => mapping[quality] === kbps);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/qualityToKbps.js","module.exports = {\n\t\"name\": \"@meisterplayer/plugin-youtube\",\n\t\"version\": \"5.2.1\",\n\t\"description\": \"Meister plugin for playing Youtube videos\",\n\t\"main\": \"dist/Hls.js\",\n\t\"keywords\": [\n\t\t\"meister\",\n\t\t\"video\",\n\t\t\"plugin\"\n\t],\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/meisterplayer/media-youtube.git\"\n\t},\n\t\"author\": \"Triple\",\n\t\"license\": \"Apache-2.0\",\n\t\"dependencies\": {\n\t\t\"meister-heartbeat\": \"^1.0.2\",\n\t\t\"promise-script-loader\": \"^0.1.3\"\n\t},\n\t\"devDependencies\": {\n\t\t\"meister-js-dev\": \"^3.1.0\",\n\t\t\"meister-gulp-webpack-tasks\": \"^1.0.6\",\n\t\t\"babel-preset-es2015\": \"^6.24.0\",\n\t\t\"babel-preset-es2017\": \"^6.22.0\",\n\t\t\"gulp\": \"^3.9.1\"\n\t},\n\t\"peerDependencies\": {\n\t\t\"@meisterplayer/meisterplayer\": \">= 5.1.0\"\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}