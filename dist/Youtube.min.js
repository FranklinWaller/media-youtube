module.exports=function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=7)}([function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.YoutubePlayer=t.Youtube=void 0;var n=r(3),a=i(n),o=r(4),u=i(o);t.Youtube=a.default,t.YoutubePlayer=u.default},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,e),this.intervalTime=Number.isFinite(t)?1e3*t:5e3,this.debug=r,this.shouldCallCallback=!0,this.lastBeat=0,this.intervalId=0}return n(e,[{key:"beat",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.intervalId&&(this.debug&&console.log("Removing previous interval"),clearInterval(this.intervalId)),this.lastBeat=Date.now(),this.intervalId=setInterval(function(){var r=Date.now(),i=r-e.lastBeat;e.lastBeat=r,e.shouldCallCallback&&t(i)},this.intervalTime)}},{key:"mute",value:function(){this.shouldCallCallback=!1}},{key:"unmute",value:function(){this.shouldCallCallback=!0}},{key:"kill",value:function(){clearInterval(this.intervalId)}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return new Promise(function(t,r){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.async=!0,i.addEventListener("load",t),i.addEventListener("error",r),document.body.appendChild(i)})};t.default=i},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function i(n,a){try{var o=t[n](a),u=o.value}catch(e){return void r(e)}if(!o.done)return Promise.resolve(u).then(function(e){i("next",e)},function(e){i("throw",e)});e(u)}return i("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=function e(t,r,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},c=r(2),p=i(c),h=r(6),f=i(h),y=function(e){function t(e,r){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i.player=null,(0,p.default)(e.scriptUrl||"https://www.youtube.com/player_api"),i.onYoutubeApiReadyPromise=new Promise(function(e){i.youtubeApiReadyResolve=e}),window.onYouTubePlayerAPIReady=function(){i.youtubeApiReadyResolve()},i}return u(t,e),s(t,[{key:"isItemSupported",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("youtube"===t.type){e.next=2;break}return e.abrupt("return",{supported:!1,errorCode:Meister.ErrorCodes.WRONG_TYPE});case 2:return e.abrupt("return",{supported:!0});case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"process",value:function(){function e(e){return t.apply(this,arguments)}var t=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onYoutubeApiReadyPromise;case 2:return this.player=this.meister.getPlayerByType("youtube",t),e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"load",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),this.on("_playerTimeUpdate",this._onPlayerTimeUpdate.bind(this)),this.on("requestSeek",this.onRequestSeek.bind(this)),this.player.currentSrc=e.src}},{key:"_onPlayerTimeUpdate",value:function(){this.meister.trigger("playerTimeUpdate",{currentTime:this.meister.currentTime,duration:this.meister.duration})}},{key:"onRequestSeek",value:function(e){var t=void 0;isNaN(e.relativePosition)?isNaN(e.timeOffset)||(t=this.meister.currentTime+e.timeOffset):t=e.relativePosition*this.meister.duration,this.blockSeekForward&&t>this.meister.currentTime||Number.isFinite(t)&&(this.meister.currentTime=t)}}],[{key:"pluginName",get:function(){return"Youtube"}},{key:"pluginVersion",get:function(){return f.default.version}}]),t}(Meister.MediaPlugin);Meister.registerPlugin(y.pluginName,y),t.default=y},function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function e(t,r,i){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},s=r(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=r(5),p=function(e){function t(e,r){i(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.mediaElement=null,a.heartbeat=null,a.isPlaying=!1,a.playerTime=0,a.videoData=null,a.iframeReadyPromise=new Promise(function(e){a.iframeReadyResolve=e}),window.addEventListener("resize",a.onResize.bind(a)),a}return a(t,e),o(t,[{key:"isTypeSupported",value:function(e){return"youtube"===e}},{key:"preloadContent",value:function(){return Promise.resolve()}},{key:"load",value:function(e){var r=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e),this.mediaElement=document.createElement("div"),this.mediaElement.id=Math.random().toString(),this.wrapper.appendChild(this.mediaElement),this.player=new window.YT.Player(this.mediaElement.id,{height:"360",width:"640",events:{onReady:this.onIframeReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this)},playerVars:{controls:0,autoplay:1,modestbranding:0,rel:0,showinfo:0}}),this.iframeReadyPromise=new Promise(function(e){r.iframeReadyResolve=e})}},{key:"unload",value:function(){this.player=null,this.isPlaying=!1,this.playerTime=0,this.videoData=null,this.heartbeat.kill(),this.heartbeat=null,this.mediaElement=null}},{key:"pause",value:function(){(this.player||this.player.pauseVideo)&&(this.player.pauseVideo(),this.heartbeat&&this.heartbeat.mute())}},{key:"play",value:function(){this.player&&this.player.playVideo&&(this.heartbeat&&this.heartbeat.unmute(),this.player.playVideo())}},{key:"onIframeReady",value:function(e){var t=this;this.iframeReadyResolve(),this.heartbeat=new l.default(.2),this.heartbeat.beat(function(e){return t.onHeartbeat(e)}),this.meister.trigger("itemTimeInfo",{isLive:!1,duration:this.duration}),this.on("requestBitrate",this.onRequestBitrate.bind(this)),this.onResize(),this.meister.trigger("playerCreated")}},{key:"onPlayerStateChange",value:function(e){var t=this;if(e.data===window.YT.PlayerState.PLAYING?(this.isPlaying=!0,this.meister.trigger("playerPlay")):e.data===window.YT.PlayerState.ENDED?(this.isPlaying=!1,this.shouldTriggerReplay=!0,this.meister.trigger("playerEnd")):e.data===window.YT.PlayerState.PAUSED&&(this.isPlaying=!1,this.meister.trigger("playerPause")),!this.videoData&&""!==this.player.getVideoData().title){this.videoData=this.player.getVideoData(),this.videoQualitys=this.player.getAvailableQualityLevels(),this.bitrates=[],this.videoQualitys=(0,c.qualityToKbps)(this.videoQualitys),this.videoQualitys.forEach(function(e,r){return t.bitrates.push({bitrate:e,index:r})});var r=(0,c.qualityToKbps)([this.player.getPlaybackQuality()])[0],i=this.bitrates.findIndex(function(e){return r===e.bitrate});this.meister.trigger("itemMetadata",this.videoData),this.meister.trigger("itemBitrates",{bitrates:this.bitrates,currentIndex:i})}}},{key:"onRequestBitrate",value:function(e){var t=this.bitrates.find(function(t){return t.index===e.bitrateIndex}),r=(0,c.kbpsToQuality)(t.bitrate);this.player.setPlaybackQuality(r)}},{key:"onHeartbeat",value:function(e){this.playerTime=this.player.getCurrentTime(),this.meister.trigger("_playerTimeUpdate")}},{key:"onResize",value:function(){var e=this.meister.container.offsetWidth,t=this.meister.container.offsetHeight;document.webkitFullscreenElement?(e=window.screen.width,t=window.screen.height,this.resetNormalModeAfterFullScreen=!0):this.resetNormalModeAfterFullScreen&&(e=this.beforeFullscreenWidth,t=this.beforeFullscreenHeight,this.resetNormalModeAfterFullScreen=!1),document.webkitFullscreenElement||(this.beforeFullscreenWidth=e,this.beforeFullscreenHeight=t),this.player&&this.player.setSize(e,t-4)}},{key:"currentSrc",set:function(e){var t=this;this.player&&this.iframeReadyPromise.then(function(){e.startsWith("http")?console.error("Please insert a Youtube ID"):t.player.loadVideoById(e)})}},{key:"playing",get:function(){return this.isPlaying}},{key:"currentTime",get:function(){return this.playerTime},set:function(e){this.player.seekTo(e)}},{key:"duration",get:function(){if(this.player&&this.player.getDuration)return this.player.getDuration()}},{key:"volume",get:function(){return this.player.getVolume()/100},set:function(e){this.player&&(this.player.setVolume(100*e),this.meister.trigger("playerVolumeChange"))}},{key:"muted",get:function(){return this.player.isMuted()},set:function(e){e?this.player.mute():this.player.unMute()}}],[{key:"pluginName",get:function(){return"YoutubePlayer"}}]),t}(Meister.PlayerPlugin);Meister.registerPlugin(p.pluginName,p),t.default=p},function(e,t,r){"use strict";function i(e){return e.map(function(e){return a[e]})}function n(e){return Object.keys(a).find(function(t){return a[t]===e})}Object.defineProperty(t,"__esModule",{value:!0}),t.qualityToKbps=i,t.kbpsToQuality=n;var a={highres:1e8,hd2160:35e6,hd1440:16e6,hd1080:8e6,hd720:5e6,large:25e5,medium:1e6,small:4e5,tiny:8e4,auto:0}},function(e,t){e.exports={name:"@npm-wearetriple/meister-plugin-youtube",version:"5.1.0",description:"Meister plugin for playing Youtube videos",main:"dist/Hls.js",keywords:["meister","video","plugin"],repository:{type:"git",url:"https://github.com/meisterplayer/media-youtube.git"},author:"Triple",license:"Apache-2.0",dependencies:{"meister-heartbeat":"^1.0.2","promise-script-loader":"^0.1.3"},devDependencies:{"meister-js-dev":"^3.1.0","meister-gulp-webpack-tasks":"^1.0.6","babel-preset-es2015":"^6.24.0","babel-preset-es2017":"^6.22.0",gulp:"^3.9.1"}}},function(e,t,r){e.exports=r(0)}]);